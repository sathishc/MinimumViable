// knockout-amd-helpers 0.2.5 | (c) 2013 Ryan Niemeyer |  http://www.opensource.org/licenses/mit-license

define(["knockout"],function(e){var t=window.require||window.curl,n=e.utils.unwrapObservable,r=function(e,t){var n,r=function(){return e.apply(this,t||[])};return r.prototype=e.prototype,n=new r,n.constructor=e,n},i=function(e){return e&&e.replace(/\/?$/,"/")};e.bindingHandlers.module={init:function(s,o,u,a,f){var l=o(),c=n(l),h={},p=e.bindingHandlers.module.initializer||"initialize";return c&&typeof c=="object"&&(p=c.initializer||p,e.utils.arrayForEach(["afterRender","templateEngine"],function(e){c[e]&&(h[e]=c[e])})),s.firstChild||(h.name=function(){var e=n(l);return(e&&typeof e=="object"?n(e.template||e.name):e)||""}),h.data=e.observable(),h["if"]=h.data,e.applyBindingsToNode(s,{template:h},f),e.computed({read:function(){var s=n(l),o;s&&typeof s=="object"&&(o=[].concat(n(s.data)),s=n(s.name)),h.data(null),s&&t([i(e.bindingHandlers.module.baseDir)+s],function(e){typeof e=="function"?e=r(e,o):e&&e[p]&&(e=e[p].apply(e,o)||e),h.data(e)})},disposeWhenNodeIsRemoved:s}),{controlsDescendantBindings:!0}},baseDir:"",initializer:"initialize"},e.virtualElements&&(e.virtualElements.allowedBindings.module=!0),function(e,t){var n=new e.nativeTemplateEngine,r={};n.defaultPath="templates",n.defaultSuffix=".tmpl.html",e.templateSources.requireTemplate=function(t){this.key=t,this.template=e.observable(" "),this.requested=!1},e.templateSources.requireTemplate.prototype.text=function(e){!this.requested&&this.key&&(t(["text!"+i(n.defaultPath)+this.key+n.defaultSuffix],this.template),this.requested=!0),this.key||this.template("");if(arguments.length===0)return this.template()},n.makeTemplateSource=function(t,n){var i;if(typeof t=="string")return i=(n||document).getElementById(t),i&&i.tagName.toLowerCase()==="script"?new e.templateSources.domElement(i):(t in r||(r[t]=new e.templateSources.requireTemplate(t)),r[t]);if(t&&(t.nodeType===1||t.nodeType===8))return new e.templateSources.anonymousTemplate(t)},e.amdTemplateEngine=n,e.setTemplateEngine(n)}(e,t)});