/******************************************************************************
 * All source and examples in this project are subject to the
 * following copyright, unless specifically stated otherwise
 * in the file itself:
 *
 * Copyright (c) 2007-2009, Metaweb Technologies, Inc.
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 *       copyright notice, this list of conditions and the following
 *       disclaimer in the documentation and/or other materials provided
 *       with the distribution.
 * 
 * THIS SOFTWARE IS PROVIDED BY METAWEB TECHNOLOGIES ``AS IS'' AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL METAWEB TECHNOLOGIES BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
 * BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
 * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN
 * IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *****************************************************************************/

(function(e,t){if(!("console"in window)){var n=window.console={};n.log=n.warn=n.error=n.debug=function(){}}e(function(){var t=e("<div>");e(document.body).append(t);var n=setTimeout(function(){if(e.cleanData){var t=e.cleanData;e.cleanData=function(n){for(var r=0,i;(i=n[r])!=null;r++)e(i).triggerHandler("remove");t(n)}}else{var n=e.fn.remove;e.fn.remove=function(t,r){return this.each(function(){return r||(!t||e.filter(t,[this]).length)&&e("*",this).add([this]).each(function(){e(this).triggerHandler("remove")}),n.call(e(this),t,r)})}}},1);t.bind("remove",function(){clearTimeout(n)}),t.remove()}),e.suggest=function(t,n){e.fn[t]=function(n){return this.length||console.warn("Suggest: invoked on empty element set"),this.each(function(){this.nodeName&&(this.nodeName.toUpperCase()==="INPUT"?this.type&&this.type.toUpperCase()!=="TEXT"&&console.warn("Suggest: unsupported INPUT type: "+this.type):console.warn("Suggest: unsupported DOM element: "+this.nodeName));var r=e.data(this,t);r&&r._destroy(),e.data(this,t,new e.suggest[t](this,n))._init()})},e.suggest[t]=function(n,r){var i=this,s=this.options=e.extend(!0,{},e.suggest.defaults,e.suggest[t].defaults,r),o=s.css_prefix=s.css_prefix||"",u=s.css;this.name=t,e.each(u,function(e){u[e]=o+u[e]}),s.ac_param={},e.each(["type","type_strict","mql_filter","as_of_time","exclude_guids","category","all_types"],function(e,t){e=s[t],e!==null&&e!==""&&(typeof e=="object"&&(e=JSON.stringify(e)),s.ac_param[t]=e)}),s.ac_param.type&&(this.options._type=e.map(s.ac_param.type.split(/[, ]/),function(e){return e.replace(/[\"\[\]]/g,"")})),this._status={START:"",LOADING:"",SELECT:"",ERROR:""},s.status&&s.status instanceof Array&&s.status.length>=3&&(this._status.START=s.status[0]||"",this._status.LOADING=s.status[1]||"",this._status.SELECT=s.status[2]||"",s.status.length===4&&(this._status.ERROR=s.status[3]||"")),r=this.status=e('<div style="display:none;">').addClass(u.status);var f=this.list=e("<ul>").addClass(u.list);o=this.pane=e('<div style="display:none;" class="fbs-reset">').addClass(u.pane),o.append(r).append(f),s.parent?e(s.parent).append(o):(o.css("position","absolute"),s.zIndex&&o.css("z-index",s.zIndex),e(document.body).append(o)),o.bind("mousedown",function(e){i.input.data("dont_hide",!0),e.stopPropagation()}).bind("mouseup",function(e){i.input.data("dont_hide")&&i.input.focus(),i.input.removeData("dont_hide"),e.stopPropagation()}).bind("click",function(e){e.stopPropagation();if(e=i.get_selected())i.onselect(e,!0),i.hide_all()}),f.hover(function(e){i.hoverover_list(e)},function(e){i.hoverout_list(e)}),this.input=e(n).attr("autocomplete","off").unbind(".suggest").bind("remove.suggest",function(){i._destroy()}).bind("keydown.suggest",function(e){i.keydown(e)}).bind("keypress.suggest",function(e){i.keypress(e)}).bind("keyup.suggest",function(e){i.keyup(e)}).bind("blur.suggest",function(e){i.blur(e)}).bind("textchange.suggest",function(){i.textchange()}).bind("focus.suggest",function(e){i.focus(e)}).bind(e.browser.msie?"paste.suggest":"input.suggest",function(){clearTimeout(i.paste_timeout),i.paste_timeout=setTimeout(function(){i.textchange()},0)}),this.onresize=function(){i.invalidate_position();if(o.is(":visible")){i.position();if(s.flyout&&i.flyoutpane&&i.flyoutpane.is(":visible")){var e=i.get_selected();e&&i.flyout_position(e)}}},e(window).bind("resize.suggest",this.onresize).bind("scroll.suggest",this.onresize)},e.suggest[t].prototype=e.extend({},e.suggest.prototype,n)},e.suggest.prototype={_init:function(){},_destroy:function(){this.pane.remove(),this.list.remove(),this.input.unbind(".suggest"),e(window).unbind("resize.suggest",this.onresize).unbind("scroll.suggest",this.onresize),this.input.removeData("data.suggest")},invalidate_position:function(){self._position=null},status_start:function(){this.hide_all(),this.status.siblings().hide(),this._status.START&&(this.status.text(this._status.START).show(),this.pane.is(":visible")||(this.position(),this.pane_show())),this._status.LOADING&&this.status.removeClass("loading")},status_loading:function(){this.status.siblings().show(),this._status.LOADING?(this.status.addClass("loading").text(this._status.LOADING).show(),this.pane.is(":visible")||(this.position(),this.pane_show())):this.status.hide()},status_select:function(){this.status.siblings().show(),this._status.SELECT?this.status.text(this._status.SELECT).show():this.status.hide(),this._status.LOADING&&this.status.removeClass("loading")},status_error:function(){this.status.siblings().show(),this._status.ERROR?this.status.text(this._status.ERROR).show():this.status.hide(),this._status.LOADING&&this.status.removeClass("loading")},focus:function(e){this.input.val()===""?this.status_start():this.focus_hook(e)},focus_hook:function(){!this.input.data("data.suggest")&&!this.pane.is(":visible")&&e("."+this.options.css.item,this.list).length&&(this.position(),this.pane_show())},keydown:function(e){var t=e.keyCode;if(t===9)this.tab(e);else if(t===38||t===40)e.shiftKey||e.preventDefault()},keypress:function(e){var t=e.keyCode;t===38||t===40?e.shiftKey||e.preventDefault():t===13&&this.enter(e)},keyup:function(t){var n=t.keyCode;if(n===38)t.preventDefault(),this.up(t);else if(n===40)t.preventDefault(),this.down(t);else if(t.ctrlKey&&n===77)e(".fbs-more-link",this.pane).click();else if(e.suggest.is_char(t)){clearTimeout(this.keypress.timeout);var r=this;this.keypress.timeout=setTimeout(function(){r.textchange()},0)}else n===27&&this.escape(t);return!0},blur:function(e){this.input.data("dont_hide")||(this.input.data("data.suggest")||this.check_required(e),this.hide_all())},tab:function(t){if(!(t.shiftKey||t.metaKey||t.ctrlKey)){t=this.options,t=this.pane.is(":visible")&&e("."+t.css.item,this.list).length;var n=this.get_selected();t&&n&&(this.onselect(n),this.hide_all())}},enter:function(t){var n=this.options;if(this.pane.is(":visible"))if(t.shiftKey)this.shift_enter(t),t.preventDefault();else if(e("."+n.css.item,this.list).length){var r=this.get_selected();r?(this.onselect(r),this.hide_all(),t.preventDefault()):(r=this.input.data("data.suggest"),n.soft?r||this.check_required(t):e("."+this.options.css.item+":visible",this.list).length?(this.updown(!1),t.preventDefault()):r||this.check_required(t))}},shift_enter:function(){},escape:function(){this.hide_all()},up:function(e){this.updown(!0,e.ctrlKey||e.shiftKey)},down:function(e){this.updown(!1,null,e.ctrlKey||e.shiftKey)},updown:function(t,n,r){var i=this.options.css,s=this.list;if(this.pane.is(":visible")){var o=e("."+i.item+":visible",s);if(o.length){s=e(o[0]),o=e(o[o.length-1]);var u=this.get_selected()||[];clearTimeout(this.ignore_mouseover.timeout),this._ignore_mouseover=!1,t?n?this._goto(s):u.length?u[0]==s[0]?(s.removeClass(i.selected),this.input.val(this.input.data("original.suggest")),this.hoverout_list()):this._goto(u.prevAll("."+i.item+":visible:first")):this._goto(o):r?this._goto(o):u.length?u[0]==o[0]?(o.removeClass(i.selected),this.input.val(this.input.data("original.suggest")),this.hoverout_list()):this._goto(u.nextAll("."+i.item+":visible:first")):this._goto(s)}}else t||this.textchange()},_goto:function(e){e.trigger("mouseover.suggest");var t=e.data("data.suggest");this.input.val(t?t.name:this.input.data("original.suggest")),this.scroll_to(e)},scroll_to:function(e){var t=this.list,n=t.scrollTop(),r=n+t.innerHeight(),i=e.outerHeight();e=e.prevAll().length*i,i=e+i,e<n?(this.ignore_mouseover(),t.scrollTop(e)):i>r&&(this.ignore_mouseover(),t.scrollTop(n+i-r))},textchange:function(){this.input.removeData("data.suggest"),this.input.trigger("fb-textchange",this);var e=this.input.val();e===""?this.status_start():(this.status_loading(),this.request(e))},request:function(){},response:function(t){if(t){"cost"in t&&this.trackEvent(this.name,"response","cost",t.cost);if(this.check_response(t)){var n=[];e.isArray(t)?n=t:"result"in t&&(n=t.result);var r=e.map(arguments,function(e){return e});this.response_hook.apply(this,r);var i=null,s=this,o=this.options;e.each(n,function(e,n){n=s.create_item(n,t).bind("mouseover.suggest",function(e){s.mouseover_item(e)}).data("data.suggest",n),s.list.append(n),e===0&&(i=n)}),this.input.data("original.suggest",this.input.val()),e("."+o.css.item,this.list).length===0&&o.nomatch&&this.list.append(e('<li class="fbs-nomatch">').html(o.nomatch).bind("click.suggest",function(e){e.stopPropagation()})),r.push(i),this.show_hook.apply(this,r),this.position(),this.pane_show()}}},pane_show:function(){var t=!1;e("> li",this.list).length&&(t=!0),t||this.pane.children(":not(."+this.options.css.list+")").each(function(){if(e(this).css("display")!="none")return t=!0,!1});if(t)if(this.options.animate){var n=this;this.pane.slideDown("fast",function(){n.input.trigger("fb-pane-show",n)})}else this.pane.show(),this.input.trigger("fb-pane-show",this);else this.pane.hide(),this.input.trigger("fb-pane-hide",this)},create_item:function(t){var n=this.options.css;li=e("<li>").addClass(n.item);var r=e("<label>").text(t.name);return t.name=r.text(),li.append(e("<div>").addClass(n.item_name).append(r)),li},mouseover_item:function(t){if(!this._ignore_mouseover){t=t.target,t.nodeName.toLowerCase()!=="li"&&(t=e(t).parents("li:first"));var n=e(t),r=this.options.css;e("."+r.item,this.list).each(function(){this!==n[0]&&e(this).removeClass(r.selected)}),n.hasClass(r.selected)||(n.addClass(r.selected),this.mouseover_item_hook(n))}},mouseover_item_hook:function(){},hoverover_list:function(){},hoverout_list:function(){},check_response:function(){return!0},response_hook:function(){this.list.empty()},show_hook:function(){this.status_select()},position:function(){var t=this.pane,n=this.options;if(!n.parent){if(!self._position){var r=this.input,i=r.offset(),s=r.outerWidth(!0),o=r.outerHeight(!0);i.top+=o;var u=t.outerWidth(),a=t.outerHeight(),f=i.top+a/2,l=e(window).scrollLeft();r=e(window).scrollTop();var h=e(window).width(),p=e(window).height()+r,d=!0;"left"==n.align?d=!0:"right"==n.align?d=!1:i.left>l+h/2&&(d=!1),d||(d=i.left-(u-s),d>l&&(i.left=d)),f>p&&(n=i.top-o-a,n>r&&(i.top=n)),this._position=i}t.css({top:this._position.top,left:this._position.left})}},ignore_mouseover:function(){this._ignore_mouseover=!0;var e=this;this.ignore_mouseover.timeout=setTimeout(function(){e.ignore_mouseover_reset()},1e3)},ignore_mouseover_reset:function(){this._ignore_mouseover=!1},get_selected:function(){var t=null,n=this.options.css.selected;return e("li",this.list).each(function(){var r=e(this);if(r.hasClass(n)&&r.is(":visible"))return t=r,!1}),t},onselect:function(e){var t=e.data("data.suggest");t&&(this.input.val(t.name).data("data.suggest",t).trigger("fb-select",t),this.trackEvent(this.name,"fb-select","index",e.prevAll().length))},trackEvent:function(e,t,n,r){this.input.trigger("fb-track-event",{category:e,action:t,label:n,value:r})},check_required:function(e){var t=this.options.required;if(t===!0){if(this.input.val()!=="")return this.input.trigger("fb-required",{domEvent:e}),!1}else if(t==="always")return this.input.trigger("fb-required",{domEvent:e}),!1;return!0},hide_all:function(){this.pane.hide(),this.input.trigger("fb-pane-hide",this)}},e.extend(e.suggest,{defaults:{status:["Start typing to get suggestions...","Searching...","Select an item from the list:","Sorry, something went wrong. Please try again later"],required:!1,soft:!1,nomatch:"no matches",css:{pane:"fbs-pane",list:"fbs-list",item:"fbs-item",item_name:"fbs-item-name",selected:"fbs-selected",status:"fbs-status"},css_prefix:null,parent:null,animate:!1,zIndex:null},$$:function(t,n){return e("."+t,n)},use_jsonp:function(e){if(!e)return!1;var t=window.location.href;return t=t.substr(0,t.length-window.location.pathname.length),t===e?!1:!0},strongify:function(t,n){var r=t,i=t.toLowerCase().indexOf(n.toLowerCase());return i>=0&&(n=n.length,r=e("<div>").text(t.substring(0,i)).append(e("<strong>").text(t.substring(i,i+n))).append(document.createTextNode(t.substring(i+n))).html()),r},keyCode:{CAPS_LOCK:20,CONTROL:17,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ENTER:108,PAGE_DOWN:34,PAGE_UP:33,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,OPTION:18,APPLE:224},is_char:function(t){if(t.type!=="keypress"){var n=e.suggest.keyCode.not_char;return n||(n={},e.each(e.suggest.keyCode,function(e,t){n[""+t]=1}),e.suggest.keyCode.not_char=n),!(""+t.keyCode in n)}if((t.metaKey||t.ctrlKey)&&t.charCode===118)return!0;if("isChar"in t)return t.isChar}});var r={_destroy:e.suggest.prototype._destroy,show_hook:e.suggest.prototype.show_hook};e.suggest("suggest",{_init:function(){var t=this,n=this.options;n.flyout_service_url||(n.flyout_service_url=n.service_url),this.jsonp=e.suggest.use_jsonp(n.service_url),e.suggest.cache||(e.suggest.cache={}),n.flyout&&(this.flyoutpane=e('<div style="display:none;" class="fbs-reset">').addClass(n.css.flyoutpane),n.flyout_parent?e(n.flyout_parent).append(this.flyoutpane):(this.flyoutpane.css("position","absolute"),n.zIndex&&this.flyoutpane.css("z-index",n.zIndex),e(document.body).append(this.flyoutpane)),this.flyoutpane.hover(function(e){t.hoverover_list(e)},function(e){t.hoverout_list(e)}).bind("mousedown.suggest",function(e){e.stopPropagation(),t.pane.click()}),e.suggest.flyout||(e.suggest.flyout={}),e.suggest.flyout.cache||(e.suggest.flyout.cache={}))},_destroy:function(){r._destroy.call(this),this.flyoutpane&&this.flyoutpane.remove(),this.input.removeData("request.count.suggest"),this.input.removeData("flyout.request.count.suggest")},shift_enter:function(e){this.options.suggest_new?(this.suggest_new(),this.hide_all()):this.check_required(e)},hide_all:function(){this.pane.hide(),this.flyoutpane&&this.flyoutpane.hide(),this.input.trigger("fb-pane-hide",this),this.input.trigger("fb-flyoutpane-hide",this)},request:function(t,n){var r=this,i=this.options;this.ac_xhr&&(this.ac_xhr.abort(),this.ac_xhr=null);var s={prefix:t};n&&(s.start=n),e.extend(s,i.ac_param);var o=i.service_url+i.service_path+"?"+e.param(s),u=e.suggest.cache[o];if(u)this.response(u,n?n:-1,!0);else{clearTimeout(this.request.timeout);var a={url:i.service_url+i.service_path,data:s,beforeSend:function(){var e=r.input.data("request.count.suggest")||0;e||r.trackEvent(r.name,"start_session"),e+=1,r.trackEvent(r.name,"request","count",e),r.input.data("request.count.suggest",e)},success:function(i){e.suggest.cache[o]=i,i.prefix=t,r.response(i,n?n:-1)},error:function(e){r.status_error(),r.trackEvent(r.name,"request","error",{url:this.url,response:e?e.responseText:""}),r.input.trigger("fb-error",Array.prototype.slice.call(arguments))},complete:function(e){e&&r.trackEvent(r.name,"request","tid",e.getResponseHeader("X-Metaweb-TID"))},dataType:r.jsonp?"jsonp":"json",cache:!0};this.request.timeout=setTimeout(function(){r.ac_xhr=e.ajax(a)},i.xhr_delay)}},create_item:function(t,n){var r=this.options.css,i=e("<li>").addClass(r.item);n=e("<div>").addClass(r.item_name).append(e("<label>").append(e.suggest.strongify(t.name||t.guid,n.prefix))),t.name=n.text(),i.append(n);var s=t["n:type"]||t["notable:type"];if(s)if(typeof s=="object")n.prepend(e("<div>").addClass(r.item_type).text(s.name));else{var o,u,a=!1;e.each(t.type,function(e,t){t.id===s&&(o=t.name),t.id==="/common/topic"?a="Topic":u||(u=t.name)}),(o||u||a)&&n.prepend(e("<div>").addClass(r.item_type).text(o||u||a))}return i},mouseover_item_hook:function(e){e=e.data("data.suggest"),this.options.flyout&&e&&this.flyout_request(e)},check_response:function(e){return e.prefix===this.input.val()},response_hook:function(t,n){this.flyoutpane&&this.flyoutpane.hide(),n>0?e(".fbs-more",this.pane).remove():this.list.empty()},show_hook:function(t,n,i){r.show_hook.apply(this,[t]);var s=this.options,o=this,u=this.pane,a=this.list,f=t.result,l=e(".fbs-more",u),h=e(".fbs-suggestnew",u);f&&f.length&&"start"in t?(l.length||(f=e('<a class="fbs-more-link" href="#" title="(Ctrl+m)">view more</a>'),l=e('<div class="fbs-more">').append(f),f.bind("click.suggest",function(t){t.preventDefault(),t.stopPropagation(),t=e(this).parent(".fbs-more"),o.more(t.data("start.suggest"))}),a.after(l)),l.data("start.suggest",t.start),l.show()):l.remove(),s.suggest_new?(h.length||(t=e('<button class="fbs-suggestnew-button">'),t.text(s.suggest_new),h=e('<div class="fbs-suggestnew">').append('<div class="fbs-suggestnew-description">Your item not in the list?</div>').append(t).append('<span class="fbs-suggestnew-shortcut">(Shift+Enter)</span>').bind("click.suggest",function(e){e.stopPropagation(),o.suggest_new(e)}),u.append(h)),h.show()):h.remove(),i&&i.length&&n>0&&(n=i.prevAll().length*i.outerHeight(),a.scrollTop(),a.animate({scrollTop:n},"slow",function(){i.trigger("mouseover.suggest")}))},suggest_new:function(){var e=this.input.val();e!==""&&(this.input.data("data.suggest",e).trigger("fb-select-new",e),this.trackEvent(this.name,"fb-select-new","index","new"),this.hide_all())},more:function(e){if(e){var t=this.input.data("original.suggest");t!==null&&this.input.val(t),this.request(this.input.val(),e),this.trackEvent(this.name,"more","start",e)}return!1},flyout_request:function(t){var n=this;this.flyout_xhr&&(this.flyout_xhr.abort(),this.flyout_xhr=null);var r=this.options,i=this.flyoutpane.data("data.suggest");if(i&&t.id===i.id)this.flyoutpane.is(":visible")||(this.flyout_position(this.get_selected()),this.flyoutpane.show(),this.input.trigger("fb-flyoutpane-show",this));else if((i=e.suggest.flyout.cache[t.id])&&i.id&&i.html)this.flyout_response(i);else{var s={id:t.id};r.as_of_time&&(s.as_of_time=r.as_of_time);var o={url:r.flyout_service_url+r.flyout_service_path,data:s,beforeSend:function(){var e=n.input.data("flyout.request.count.suggest")||0;e+=1,n.trackEvent(n.name,"flyout.request","count",e),n.input.data("flyout.request.count.suggest",e)},success:function(t){t=n.jsonp?t:{id:s.id,html:t},e.suggest.flyout.cache[t.id]=t,n.flyout_response(t)},error:function(e){n.trackEvent(n.name,"flyout","error",{url:this.url,response:e?e.responseText:""})},complete:function(e){e&&n.trackEvent(n.name,"flyout","tid",e.getResponseHeader("X-Metaweb-TID"))},dataType:n.jsonp?"jsonp":"html",cache:!0};clearTimeout(this.flyout_request.timeout),this.flyout_request.timeout=setTimeout(function(){n.flyout_xhr=e.ajax(o)},r.xhr_delay),this.input.trigger("fb-request-flyout",o)}},flyout_response:function(e){var t=this.pane,n=this.get_selected()||[];t.is(":visible")&&n.length&&(t=n.data("data.suggest"))&&e.id===t.id&&e.html&&(this.flyoutpane.html(e.html),this.flyout_position(n),this.flyoutpane.show().data("data.suggest",t),this.input.trigger("fb-flyoutpane-show",this))},flyout_position:function(n){if(!this.options.flyout_parent){var r=this.pane,i=this.flyoutpane,s=this.options.css,o=t,u={top:parseInt(i.css("top"),10),left:parseInt(i.css("left"),10)},a=r.offset(),f=r.outerWidth(),l=i.outerHeight(),h=i.outerWidth();if(this.options.flyout==="bottom")o=a,f=this.input.offset(),a.top<f.top?o.top-=l:o.top+=r.outerHeight(),i.addClass(s.flyoutpane+"-bottom");else{o=n.offset(),n=n.outerHeight(),o.left+=f;var p=o.left+h;r=e(document.body).scrollLeft();var d=e(window).width()+r;o.top=o.top+n-l,o.top<a.top&&(o.top=a.top),p>d&&(a=o.left-(f+h),a>r&&(o.left=a)),i.removeClass(s.flyoutpane+"-bottom")}o.top===u.top&&o.left===u.left||i.css({top:o.top,left:o.left})}},hoverout_list:function(){this.flyoutpane&&!this.get_selected()&&this.flyoutpane.hide()}}),e.extend(e.suggest.suggest,{defaults:{type:null,type_strict:"any",mql_filter:null,as_of_time:null,service_url:"https://www.freebase.com",service_path:"/private/suggest",align:null,flyout:!0,flyout_service_url:null,flyout_service_path:"/private/flyout",flyout_parent:null,suggest_new:null,nomatch:'<em class="fbs-nomatch-text">No suggested matches.</em><h3>Tips on getting better suggestions:</h3><ul class="fbs-search-tips"><li>Enter more or fewer characters</li><li>Add words related to your original search</li><li>Try alternate spellings</li><li>Check your spelling</li></ul>',css:{item_type:"fbs-item-type",flyoutpane:"fbs-flyout-pane"},xhr_delay:200,all_types:!1}}),document.createElement("input")})(jQuery),"JSON"in window&&window.JSON||(JSON={}),function(){function c(e){return e<10?"0"+e:e}function q(e){return a.lastIndex=0,a.test(e)?'"'+e.replace(a,function(e){var t=h[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function o(t,n){var r,i,s=b,u,a=n[t];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(t)),typeof e=="function"&&(a=e.call(n,t,a));switch(typeof a){case"string":return q(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";b+=d,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){i=a.length;for(t=0;t<i;t+=1)u[t]=o(t,a)||"null";return n=u.length===0?"[]":b?"[\n"+b+u.join(",\n"+b)+"\n"+s+"]":"["+u.join(",")+"]",b=s,n}if(e&&typeof e=="object"){i=e.length;for(t=0;t<i;t+=1)r=e[t],typeof r=="string"&&(n=o(r,a))&&u.push(q(r)+(b?": ":":")+n)}else for(r in a)Object.hasOwnProperty.call(a,r)&&(n=o(r,a))&&u.push(q(r)+(b?": ":":")+n);return n=u.length===0?"{}":b?"{\n"+b+u.join(",\n"+b)+"\n"+s+"}":"{"+u.join(",")+"}",b=s,n}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z"},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var p=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,b,d,h={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},e;typeof JSON.stringify!="function"&&(JSON.stringify=function(t,n,r){var i;d=b="";if(typeof r=="number")for(i=0;i<r;i+=1)d+=" ";else typeof r=="string"&&(d=r);if(!(e=n)||typeof n=="function"||typeof n=="object"&&typeof n.length=="number")return o("",{"":t});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(f,g){function j(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.hasOwnProperty.call(i,n)&&(r=j(i,n),r!==undefined?i[n]=r:delete i[n]);return g.call(e,t,i)}p.lastIndex=0,p.test(f)&&(f=f.replace(p,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(f.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return f=eval("("+f+")"),typeof g=="function"?j({"":f},""):f;throw new SyntaxError("JSON.parse")})}(),jQuery.suggest.version="Version:r102244:102278 Built:Wed Oct 27 2010 by daepark";